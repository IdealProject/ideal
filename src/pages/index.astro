---
import Layout from "../layouts/Layout.astro";
import Image from "astro/components/Image.astro";
import CarrerasButtons from "@components/CarrerasButtons.astro";

import { SignIn, SignOut } from "auth-astro/components";
import { getSession } from "auth-astro/server";

const data = await getSession(Astro.request);

const carreras = [
  {
    name: "Ingeniería Civil",
    url: "/posts/civil",
    iconName: "triangular-ruler",
  },
  {
    name: "Ingeniería Electromecánica",
    url: "/posts/electro",
    iconName: "high-voltage",
  },
  {
    name: "Ingeniería Informática",
    url: "/posts/infor",
    iconName: "laptop",
  },
  {
    name: "Cursillo Probatorio de Admisión",
    url: "/posts/cpa",
    iconName: "memo",
  },
  {
    name: "Ingeniería Industrial",
    url: "/posts/indu",
    iconName: "factory",
  },
  {
    name: "Curso Básico de Ingeniería",
    url: "/posts/cbi",
    iconName: "bar-chart",
  }
];

const carrerasButtons = carreras.map((carrera) => ({
  ...carrera
}));
---

<Layout title="Bienvenido a Ideal" pagefinderIgnore>

  <section class="bg-white">
    <div class="py-8 px-4 mx-auto max-w-screen-xl sm:py-16 lg:px-6">
        <h2
            class="mb-8 text-4xl tracking-tight font-extrabold text-gray-900"
        >
            Editor
        </h2>
        <h2>
            {
                data ? (
                    <div>
                        <div class=" flex items-center">
                            <Image
                                src={`${data.user?.image}`}
                                alt="user profile photo"
                                width="60"
                                height="60"
                                class="rounded-full"
                            />
                            <p>{data.user?.name}</p>
                        </div>
                        <SignOut>Cerrar Sesión</SignOut>
                    </div>
                ) : (
                    <>
                        <SignIn
                            provider="google"
                            class="flex items-center gap-x-2 text-sm font-medium bg-black hover:bg-white p-4 lg:py-2 lg:px-4 md:py-2 md:px-4 xl:py-2 xl:px-4 text-white hover:text-black rounded-full transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:shadow-md"
                        >
                            Iniciar con Google
                            <svg
                                class="w-6 h-6 "
                                aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                fill="none"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    stroke="currentColor"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
                                />
                            </svg>
                        </SignIn>
                    </>
                )
            }
        </h2>
    </div>
</section>

  <div class="absolute inset-0 -z-10 h-full w-full bg-white bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px]"></div>
  <main class="container mx-auto px-4 md:px-10 xl:px-32 py-12 flex flex-col gap-y-10 md:gap-y-20 xl:gap-y-20 2xl:gap-y-20">
    
    <div class="flex flex-col md:flex-row items-center justify-between">
      <div class="md:w-1/2 md:mb-0">
        <h1 class="text-5xl md:4xl  xl:4xl font-extrabold mb-4">
          Tu plataforma de aprendizaje ideal
        </h1>
        <p class="text-xl text-gray-600">
          Notas de clases, exámenes y recursos gratuitos. Impulsado por la
          comunidad de alumnos de la FIUNI.
        </p>
        <!-- <a href="/acerca-de" class="text-blue-600 hover:underline">
          Aprende más sobre nuestra misión.
        </a> -->
      </div>
      <div class="md:w-1/2 hidden md:flex xl:flex 2xl:flex">
        <div class="w-full h-96 flex justify-center items-center">
          <Image
        class="sm:mt-8"
        src="/ReadingDoodle.svg"
        alt="Estudiante leyendo"
        width="400"
        height="400"
          />
        </div>
      </div>
    </div>

    <section class="">
      <div class="md:mt-16 xl:mt-16 2xl:mt-16 grid grid-cols-1 md:grid-cols-3 gap-4">
        {carrerasButtons.map((carrera) => (
          <CarrerasButtons {...carrera} />
        ))}
      </div>
    </section>
  </main>
</Layout>
